"\nTodo Agent for the Todo App.\n\nThis module provides the TodoAgent class which handles natural language\nparsing and maps commands to TaskManager methods.\n"\nimport re\nfrom typing import Tuple, Optional\nfrom src.services.task_manager import TaskManager\n\n\nclass TodoAgent:\n    "Handles natural language commands for the Todo App.\n\n    The TodoAgent parses natural language commands and maps them to\n    appropriate TaskManager methods, providing an intelligent interface\n    for users to interact with the todo app.\n    "\n\n    def __init__(self, task_manager: TaskManager):\n        "Initialize the TodoAgent with a TaskManager.\n\n        Args:\n            task_manager: The TaskManager instance to interact with\n        "\n        self.task_manager = task_manager\n\n    def parse_command(self, command: str) -> Tuple[str, list]:\n        "Parse a natural language command and extract action and parameters.\n\n        Args:\n            command: The natural language command to parse\n\n        Returns:\n            A tuple containing the action type and a list of parameters\n        "\n        command = command.strip().lower()\n\n        # Pattern for "add [title]" or "add [title] [description]"\n        add_pattern = r'^add\\s+(.+?)(?:\\s+(.+))?$'\n        add_match = re.match(add_pattern, command)\n        if add_match:\n            title = add_match.group(1).strip()\n            description = add_match.group(2).strip() if add_match.group(2) else ""\n            return "add", [title, description]\n\n        # Pattern for "list" or "list tasks"\n        if command in ["list", "list tasks"]:\n            return "list", []\n\n        # Pattern for "done [id]", "complete [id]"\n        complete_pattern = r'^(done|complete)\\s+(\\d+)$'\n        complete_match = re.match(complete_pattern, command)\n        if complete_match:\n            task_id = int(complete_match.group(2))\n            return "complete", [task_id]\n\n        # Pattern for "remove [id]", "delete [id]"\n        delete_pattern = r'^(remove|delete)\\s+(\\d+)$'\n        delete_match = re.match(delete_pattern, command)\n        if delete_match:\n            task_id = int(delete_match.group(2))\n            return "delete", [task_id]\n\n        # Pattern for "update [id] [new title]"\n        update_pattern = r'^update\\s+(\\d+)\\s+(.+)$'\n        update_match = re.match(update_pattern, command)\n        if update_match:\n            task_id = int(update_match.group(1))\n            new_title = update_match.group(2).strip()\n            return "update", [task_id, new_title]\n\n        # If no pattern matches, return unknown\n        return "unknown", [command]\n\n    def execute_command(self, command: str) -> str:\n        "Execute a natural language command and return the result.\n\n        Args:\n            command: The natural language command to execute\n\n        Returns:\n            A string response indicating the result of the command execution\n        "\n        try:\n            action, params = self.parse_command(command)\n\n            if action == "add":\n                title, description = params\n                task = self.task_manager.add_task(title, description)\n                return f"Task added successfully with ID {task.id}: {task.title}"\n\n            elif action == "list":\n                tasks = self.task_manager.get_all_tasks()\n                if not tasks:\n                    return "No tasks found."\n\n                task_list = []\n                for task in tasks:\n                    status = "✓" if task.completed else "○"\n                    task_list.append(f"[{status}] {task.id}. {task.title} - {task.description}")\n\n                return "\n".join(task_list)\n\n            elif action == "complete":\n                task_id = params[0]\n                task = self.task_manager.toggle_task_completion(task_id)\n                if task:\n                    status = "completed" if task.completed else "marked incomplete"\n                    return f"Task {task_id} {status}."\n                else:\n                    return f"Task with ID {task_id} not found."\n\n            elif action == "delete":\n                task_id = params[0]\n                success = self.task_manager.delete_task(task_id)\n                if success:\n                    return f"Task {task_id} deleted successfully."\n                else:\n                    return f"Task with ID {task_id} not found."\n\n            elif action == "update":\n                task_id, new_title = params\n                updated_task = self.task_manager.update_task(task_id, title=new_title)\n                if updated_task:\n                    return f"Task {task_id} updated successfully: {updated_task.title}"\n                else:\n                    return f"Task with ID {task_id} not found."\n\n            elif action == "unknown":\n                return f"Unknown command: '{command}'. Please try again with a valid command."\n\n            else:\n                return f"Unsupported action: {action}"\n\n        except ValueError as e:\n            return f"Error: {str(e)}"\n        except Exception as e:\n            return f"An error occurred: {str(e)}"
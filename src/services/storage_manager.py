"\nStorage Manager for the Todo App.\n\nThis module provides the StorageManager class which handles saving and loading\ntasks to/from a JSON file for persistence.\n"\nimport json\nfrom pathlib import Path\nfrom typing import Dict, List, Any\nfrom src.models.task import Task\n\n\nclass StorageManager:\n    "Manages task persistence using JSON files.\n\n    The StorageManager handles saving and loading tasks to/from a JSON file,\n    ensuring data persists between application runs.\n    "\n\n    def __init__(self, file_path: str = "data/tasks.json"):\n        "Initialize the StorageManager with a file path.\n\n        Args:\n            file_path: Path to the JSON file for storing tasks\n        "\n        self.file_path = Path(file_path)\n        # Create the data directory if it doesn't exist\n        self.file_path.parent.mkdir(parents=True, exist_ok=True)\n\n    def save_tasks(self, tasks: Dict[int, Task]) -> None:\n        "Save tasks to the JSON file.\n\n        Args:\n            tasks: Dictionary of tasks to save, with ID as key and Task as value\n        "\n        # Convert tasks to a serializable format\n        tasks_data = {}\n        for task_id, task in tasks.items():\n            tasks_data[task_id] = {\n                'id': task.id,\n                'title': task.title,\n                'description': task.description,\n                'completed': task.completed\n            }\n\n        # Write to file\n        with open(self.file_path, 'w', encoding='utf-8') as file:\n            json.dump(tasks_data, file, indent=2)\n\n    def load_tasks(self) -> Dict[int, Task]:\n        "Load tasks from the JSON file.\n\n        Returns:\n            Dictionary of tasks with ID as key and Task as value\n        "\n        if not self.file_path.exists():\n            return {}\n\n        try:\n            with open(self.file_path, 'r', encoding='utf-8') as file:\n                tasks_data = json.load(file)\n\n            tasks = {}\n            for task_id_str, task_data in tasks_data.items():\n                task_id = int(task_id_str)\n                task = Task(\n                    id=task_data['id'],\n                    title=task_data['title'],\n                    description=task_data['description'],\n                    completed=task_data['completed']\n                )\n                tasks[task_id] = task\n\n            return tasks\n        except (json.JSONDecodeError, KeyError, ValueError):\n            # If there's an error loading the file, return empty dict\n            return {}\n\n    def get_next_id(self) -> int:\n        "Determine the next available ID based on the loaded tasks.\n\n        Returns:\n            The next available task ID\n        "\n        if not self.file_path.exists():\n            return 1\n\n        tasks = self.load_tasks()\n        if not tasks:\n            return 1\n\n        return max(tasks.keys()) + 1